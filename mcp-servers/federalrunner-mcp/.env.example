# FederalRunner MCP Configuration
# Copy this file to .env and customize as needed

# ============================================================================
# PHASE 1: Non-Headless Testing (Visual Debugging)
# ============================================================================
# Use these settings for Phase 1 tests (watch the browser execute)
# Perfect for debugging and verifying field interactions

FEDERALRUNNER_BROWSER_TYPE=chromium
FEDERALRUNNER_HEADLESS=false
FEDERALRUNNER_SLOW_MO=500

# ============================================================================
# PHASE 2: Headless Testing (Production Validation)
# ============================================================================
# Use these settings for Phase 2 tests (headless production mode)
# WebKit works with FSA in headless mode (Chromium doesn't)
#
# To switch to Phase 2, change the above settings to:
# FEDERALRUNNER_BROWSER_TYPE=webkit
# FEDERALRUNNER_HEADLESS=true
# FEDERALRUNNER_SLOW_MO=0

# ============================================================================
# Execution Settings
# ============================================================================
FEDERALRUNNER_EXECUTION_TIMEOUT=60

# ============================================================================
# Screenshot Settings
# ============================================================================
FEDERALRUNNER_SCREENSHOT_QUALITY=80
FEDERALRUNNER_SCREENSHOT_MAX_SIZE_KB=100
FEDERALRUNNER_SAVE_SCREENSHOTS=true

# ============================================================================
# Viewport Settings
# ============================================================================
FEDERALRUNNER_VIEWPORT_WIDTH=1280
FEDERALRUNNER_VIEWPORT_HEIGHT=1024

# ============================================================================
# Timeout Settings (in milliseconds)
# ============================================================================
FEDERALRUNNER_NAVIGATION_TIMEOUT=30000
FEDERALRUNNER_ELEMENT_TIMEOUT=10000

# ============================================================================
# Directory Settings (optional - intelligent defaults used)
# ============================================================================
# FEDERALRUNNER_WORKSPACE_ROOT=/path/to/federalrunner-mcp
# FEDERALRUNNER_WIZARDS_DIR=../../wizards  # SHARED: multi-agent-federal-form-automation-system/wizards/ (default)
# FEDERALRUNNER_LOG_DIR=/path/to/federalrunner-mcp/logs
# FEDERALRUNNER_SCREENSHOT_DIR=/path/to/federalrunner-mcp/screenshots
#
# IMPORTANT: Wizards directory is SHARED between FederalScout and FederalRunner
#   multi-agent-federal-form-automation-system/wizards/wizard-structures/  - Wizard Structure JSON files (input)
#   multi-agent-federal-form-automation-system/wizards/data-schemas/       - User Data Schemas (THE CONTRACT)
#   mcp-servers/federalrunner-mcp/logs/                                    - FederalRunner application logs
#   mcp-servers/federalrunner-mcp/screenshots/                             - Execution screenshots (audit trail)

# ============================================================================
# Logging
# ============================================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# ============================================================================
# Browser Strategy
# ============================================================================
# CRITICAL: FSA website blocks headless Chromium and Firefox
#
# Environment          | Browser  | Headless | Purpose
# ---------------------|----------|----------|----------------------------------
# Local pytest Phase 1 | chromium | false    | Visual debugging
# Local pytest Phase 2 | webkit   | true     | Production validation
# Local MCP Server     | chromium | false    | Interactive testing with Claude
# Cloud Run Production | webkit   | true     | Deployment (FSA compatible)

# ============================================================================
# Testing Workflow
# ============================================================================
# 1. Phase 1: Use defaults above (chromium, headless=false, slow_mo=500)
#    Run: pytest tests/test_execution_local.py::test_federalrunner_execute_wizard_non_headless -v -s
#    Watch browser execute FSA wizard visually
#
# 2. Phase 2: Update to (webkit, headless=true, slow_mo=0)
#    Run: pytest tests/test_execution_local.py::test_federalrunner_execute_wizard_headless -v -s
#    Validate production configuration
#
# 3. Or run all tests: ./run_tests.sh
